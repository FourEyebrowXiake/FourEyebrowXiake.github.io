webpackJsonp([90418537729686],{"./node_modules/json-loader/index.js!./.cache/json/javascript中的多态和继承.json":function(n,s){n.exports={data:{site:{meta:{title:"四条眉毛的博客",description:"I'm Lin Jin , a web developer and a travel enthusiasts. My target is to write clean and efficient code, to solve poblems on the web and to learn something more. ",url:"",author:"Lin Jin",twitter:"四条眉毛"}},post:{id:"/Users/fourfish/Desktop/gatsby-starter-bootstrap/src/pages/articles/Javascript中的多态和继承/Javascript中的多态和继承.md absPath of file >>> MarkdownRemark",html:'<h1>说点历史</h1>\n<p>了解 JavaScript 的都知道，除了几个简单的数据类型，剩下的所有数据类型在 Javascript 中都是对象。之所以会这样，是因为 Js 诞生于面向对象思想最兴盛的时期。Js 之父 Brendan Eich 无疑受到了影响。</p>\n<p>面向对象的思想如此的火热，以至于出现了一些狂热的言论，如没用使用面向对象思想的程序都是过时的设计。这些言论当然是荒谬的，但不得不承认面向对象的变革推动了一些概念的流行。其中最重要的概念就是<strong>封装</strong>（将内部复杂性与外部接口切割开来)，而对象正是这一概念最鲜明的体现。</p>\n<p>有了封装，才有了多态和继承等概念，可见其重要性。</p>\n<!-- more -->\n<h1>封装</h1>\n<p>对象就像一个坚硬的外壳，它隐藏了其内部的复杂性，并提供给我们一些旋钮和接口（如方法）作为操作对象的接口。这一想法就是封装的具体体现。</p>\n<h1>多态</h1>\n<p>接口的多种不同的实现方法即为多态。</p>\n<p>JavaScript 中多态是通过<strong>组合</strong>和<strong>虚函数</strong>来实现的。构造函数接受函数作为参数，来自定义自己的接口。</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token comment" spellcheck="true">//父对象</span>\n<span class="token keyword">function</span> <span class="token function">TextCell</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>text <span class="token operator">=</span> text<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"\\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\nTextCell<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>minWidth <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> line<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">return</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> line<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\nTextCell<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>minHeight <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>text<span class="token punctuation">.</span>length<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\nTextCell<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>draw <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>\n  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> height<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">var</span> line <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>text<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string">""</span><span class="token punctuation">;</span>\n    result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>line <span class="token operator">+</span> <span class="token function">repeat</span><span class="token punctuation">(</span><span class="token string">" "</span><span class="token punctuation">,</span> width <span class="token operator">-</span> line<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n  <span class="token punctuation">}</span>\n  <span class="token keyword">return</span> result<span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment" spellcheck="true">//子对象</span>\n<span class="token keyword">function</span> <span class="token function">UnderlinedCell</span><span class="token punctuation">(</span>inner<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>inner <span class="token operator">=</span> inner<span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\nUnderlinedCell<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>minWidth <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>inner<span class="token punctuation">.</span><span class="token function">minWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\nUnderlinedCell<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>minHeight <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>inner<span class="token punctuation">.</span><span class="token function">minHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\nUnderlinedCell<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>draw <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>inner<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span>width<span class="token punctuation">,</span> height <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>\n    <span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token function">repeat</span><span class="token punctuation">(</span><span class="token string">"-"</span><span class="token punctuation">,</span> width<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token keyword">var</span> underlinedCell <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">UnderlinedCell</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TextCell</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre>\n      </div>\n<p>如上，通过把 TextCell 对象传入 UnderlinedCell 构造函数进行组合。而像 minHeight、 minWidth 这类在父类和子类有不同实现的函数为虚函数。所以说 Js 中多态的实现靠组合和虚函数。</p>\n<h2>继承</h2>\n<p>当你像构造出与当前类型相似的类型时，可以通过继承来实现。</p>\n<p>Js 中的继承有多种实现，这里只介绍寄生组合式继承这一种。</p>\n<div class="gatsby-highlight">\n      <pre class="language-javascript"><code><span class="token comment" spellcheck="true">// Shape - superclass</span>\n<span class="token keyword">function</span> <span class="token function">Shape</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment" spellcheck="true">// superclass method</span>\nShape<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>move <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+=</span> x<span class="token punctuation">;</span>\n  <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+=</span> y<span class="token punctuation">;</span>\n  console<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">\'Shape moved.\'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n<span class="token punctuation">}</span><span class="token punctuation">;</span>\n\n<span class="token comment" spellcheck="true">// Rectangle - subclass</span>\n<span class="token keyword">function</span> <span class="token function">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n  Shape<span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// call super constructor.</span>\n<span class="token punctuation">}</span>\n\n<span class="token comment" spellcheck="true">// subclass extends superclass</span>\nRectangle<span class="token punctuation">.</span>prototype <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Shape<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>\nRectangle<span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>constructor <span class="token operator">=</span> Rectangle<span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// for rect instanceof Rectangle === true</span>\n\n<span class="token keyword">var</span> rect <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Rectangle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'Is rect an instance of Rectangle?\'</span><span class="token punctuation">,</span> rect <span class="token keyword">instanceof</span> <span class="token class-name">Rectangle</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">\'Is rect an instance of Shape?\'</span><span class="token punctuation">,</span> rect <span class="token keyword">instanceof</span> <span class="token class-name">Shape</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true">// true</span>\nrect<span class="token punctuation">.</span><span class="token function">move</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment" spellcheck="true">// Outputs, \'Shape moved.\'</span>\n</code></pre>\n      </div>\n<p>其实呢，我们天天在用的 array、object 的继承关系和上面的代码如出一辙，看下图，Shape 相当于 Object，Rectangle 相当 Array:</p>\n<html><head></head><body>\n  <span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-bottom: 1.0725rem;; max-width: 750px; margin-left: auto; margin-right: auto;">\n    <span class="gatsby-resp-image-background-image" style="padding-bottom: 89.22470433639947%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAAB+ElEQVQ4y6VU2Y7aQBDk/z8lWQUeAvsAIjwgENhcZhdsYgPGYO4bAX6A2qlGRnspAtJSqwfTU1Pd1TORIDii02ljNpvhX3Y8HtFut+H7Q7iuq/Z0cDgcv+RFttstGo0GWq0WRqMRJpMJ5vM5FosFVqvVNZG/Cfjy8op+vw9L5fd6Pcmhc9/5fEZkPB4jHv+NWCyKxPMzstmseDKZRK1Ww2azEa/X6zCbTVQqVQwGA9i2DdM0MR5PQAyuT6cTIkTl4jvnf6GRjaEOKJdKGKpKyLZaraoDKlKdYRgXQNxoLFPTNAGg53I5ieG3fD5/AWT9PP09m+8sUKJYVgsdxaylou20RajhcCgxCIJLD6kuE9kXisHm8hsP2u12V8Dlcik57BXZ2rYjOVT8gyiNxiuiv6J4+vkDfzIZESSVSiGj1uzTZ1FKqoeDgS9AJEBxCGZZ1uOicLzIkFNQLpdl7CjQXaIQUNc11Y65lOgoQF3XoRU1NFUbCH4XoOd5woKl04vFokQCMRYKhfsAmUyRPjuZM+73+4sotwIe1AaOjOf1RazQ1uv1x7t8KyDvMtU0jDqm06kIw/Ghv39Y7hLlr7piHGTeXY5Ns2mKQN1u9zFADnb4urhuVx6K/wIkK6odgpim9Tig7/uIRWOIJxIyMul0Wh4Irh3Huea9AbSMUGPwWdbMAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;">\n      <img class="gatsby-resp-image-image" style="width: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;" alt="Array" title="" src="/static/a8c122fad8f0568f52f8b285f8ca4393-245fd.png" srcset="/static/a8c122fad8f0568f52f8b285f8ca4393-7aee9.png 188w,\n/static/a8c122fad8f0568f52f8b285f8ca4393-2014b.png 375w,\n/static/a8c122fad8f0568f52f8b285f8ca4393-245fd.png 750w,\n/static/a8c122fad8f0568f52f8b285f8ca4393-40330.png 761w" sizes="(max-width: 750px) 100vw, 750px">\n    </span>\n  </span>\n  \n<figcaption>Array&#x548C;Object&#x7684;&#x7EE7;&#x627F;&#x5173;&#x7CFB;</figcaption></body></html>',frontmatter:{layout:"post",title:"Javascript中的多态和继承",path:"/Javascript中的多态和继承/",categories:["Javascript"],date:"2017/09/22"}}},pathContext:{path:"/Javascript中的多态和继承/"}}}});
//# sourceMappingURL=path---javascript中的多态和继承-c029cc7f28b6f48a2317.js.map